# Tetris

## Описание

Проект реализует консольную версию классической игры **Тетрис**, популярной на приставках Brickgame. Игра реализована на языке программирования **C (C11)** с использованием **библиотеки `ncurses`** для интерфейса и построена по принципам структурного программирования.

Проект разделён на библиотеку с логикой игры и интерфейсную часть, работающую в терминале. Вся игровая логика реализована с использованием конечного автомата, детально описывающего состояние игры.

## Особенности реализации

* Полная реализация механики игры "Тетрис", включая:

  * Вращение фигур;
  * Горизонтальное перемещение;
  * Ускоренное падение;
  * Показ следующей фигуры;
  * Уничтожение заполненных линий;
  * Завершение игры при переполнении поля;
* Поддержка всех типов фигур классического тетриса;
* Управление полностью повторяет оригинальные консоли:

  * Старт игры;
  * Пауза;
  * Завершение игры;
  * Стрелки ← → ↓ — управление фигурой;
  * Кнопка действия — вращение;
* Игровое поле: 10×20 ячеек;
* Поддержка подсчета очков с прогрессивной системой начисления;
* Сохранение и отображение рекорда (high score);
* Реализована механика уровней: каждые 600 очков увеличивают уровень и скорость;
* Использована библиотека `check` для unit-тестов — покрытие логики игры превышает 80%;
* Визуализация текущего состояния конечного автомата оформлена в виде диаграммы (см. `docs/fsm_diagram.png` или `.dot`);
* Следует Google C Style Guide.


## Управление

| Кнопка          | Действие        |
| --------------- | --------------- |
| `enter`         | Старт игры      |
| `p`             | Пауза           |
| `backspace`     | Завершение игры |
| ← → ↓ (стрелки) | Движение фигуры |
| Пробел          | Вращение фигуры |

## Сборка и установка

```bash
make all              # Сборка проекта
make test             # Запуск unit-тестов
make install PREFIX=/your/path  # Установка
make uninstall        # Удаление установленной версии
make clean            # Очистка сборки
make gcov_report      # Отчёт покрытия кода
```

## Подсчёт очков

| Уничтожено линий | Очки |
| ---------------- | ---- |
| 1                | 100  |
| 2                | 300  |
| 3                | 700  |
| 4                | 1500 |

* При достижении каждых 600 очков уровень увеличивается.
* Максимальный уровень: **10**.
* Уровень влияет на скорость падения фигур.
* Рекорд сохраняется между запусками в `highscore.db`.

## Зависимости

* `gcc` (C11)
* `make`
* `ncurses`
* `check` (для тестов)
* `gcov` (для покрытия)

## Состояния конечного автомата

1. **Старт**
2. **Спавн**
3. **Перемещение**
4. **Сдвиг**
5. **Соединение**
6. **Игра окончена**

Переходы между состояниями формализованы согласно диаграмме в `docs/fsm_diagram.png`.

